# è£‚ä¸–ä¹åŸŸÂ·æ³•åˆ™é“¾çºªå…ƒ æ–‡åŒ–æ¡†æ¶åˆ†æç³»ç»Ÿ

## æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º"è£‚ä¸–ä¹åŸŸÂ·æ³•åˆ™é“¾çºªå…ƒ"å°è¯´é¡¹ç›®è®¾è®¡çš„æ–‡åŒ–æ¡†æ¶åˆ†æå·¥å…·ï¼Œæ”¯æŒå¯¹ä¹ä¸ªåŸŸçš„å…­ç»´æ–‡åŒ–è®¾å®šè¿›è¡Œæ·±åº¦åˆ†æã€å®ä½“è¯†åˆ«ã€å…³ç³»ç½‘ç»œæ„å»ºå’Œç»“æ„åŒ–æ•°æ®è¾“å‡ºã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ å…­ç»´æ–‡åŒ–åˆ†æ
- **A. ç¥è¯ä¸å®—æ•™**: åˆ†æå„åŸŸçš„ä¿¡ä»°ä½“ç³»ã€ç¥è¯ä¼ è¯´å’Œå®—æ•™ç»„ç»‡
- **B. æƒåŠ›ä¸æ³•å¾‹**: è§£ææ”¿æ²»åˆ¶åº¦ã€æ³•å¾‹ä½“ç³»å’ŒæƒåŠ›ç»“æ„
- **C. ç»æµä¸æŠ€æœ¯**: è¯†åˆ«ç»æµæ¨¡å¼ã€æŠ€æœ¯æ°´å¹³å’Œè´¸æ˜“å…³ç³»
- **D. å®¶åº­ä¸æ•™è‚²**: æå–å®¶åº­ç»“æ„ã€æ•™è‚²åˆ¶åº¦å’Œç¤¾ä¼šä¼ æ‰¿
- **E. ä»ªå¼ä¸æ—¥å¸¸**: åˆ†ææ—¥å¸¸ä¹ ä¿—ã€èŠ‚æ—¥åº†å…¸å’Œç”Ÿæ´»æ–¹å¼
- **F. è‰ºæœ¯ä¸å¨±ä¹**: è¯†åˆ«è‰ºæœ¯å½¢å¼ã€å¨±ä¹æ´»åŠ¨å’Œæ–‡åŒ–è¡¨è¾¾

### ğŸ” æ™ºèƒ½å®ä½“è¯†åˆ«
- **ç»„ç»‡æœºæ„**: ç‹æœã€è®®ä¼šã€å®—é—¨ã€å¸æ®¿ç­‰æƒåŠ›ç»„ç»‡
- **é‡è¦æ¦‚å¿µ**: æ³•åˆ™é“¾ã€é“¾ç±ã€æ–­é“¾æœ¯ç­‰æ ¸å¿ƒæ¦‚å¿µ
- **æ–‡åŒ–ç‰©å“**: é“¾ç¥¨ã€ç¯å°ã€é•‡é­‚å™¨ç­‰ç‰¹è‰²ç‰©å“
- **ä»ªå¼æ´»åŠ¨**: è£‚ä¸–å¤œã€å½’ç¯ç¤¼ã€ç‹‚ç¯æœˆç­‰æ–‡åŒ–ä»ªå¼
- **åœ°ç†ä½ç½®**: å¸éƒ½ã€æ¸¯å£ã€åŸé˜™ç­‰é‡è¦åœ°ç‚¹

### ğŸŒ å…³ç³»ç½‘ç»œåˆ†æ
- **è·¨åŸŸå…³ç³»**: åˆ†æä¹åŸŸä¹‹é—´çš„æ”¿æ²»ã€ç»æµã€æ–‡åŒ–å…³ç³»
- **å®ä½“å…³è”**: è¯†åˆ«å®ä½“é—´çš„ä¾èµ–ã€å†²çªã€åˆä½œå…³ç³»
- **æƒåŠ›ç»“æ„**: æ„å»ºå„åŸŸå†…éƒ¨çš„æƒåŠ›å±‚çº§ç½‘ç»œ
- **è´¸æ˜“ç½‘ç»œ**: åˆ†æç»æµè´¸æ˜“å’Œèµ„æºæµåŠ¨å…³ç³»

### ğŸ“Š æ•°æ®ç»“æ„åŒ–è¾“å‡º
- **å®Œæ•´JSONæ ¼å¼**: åŒ…å«æ‰€æœ‰åˆ†æç»“æœçš„ç»“æ„åŒ–æ•°æ®
- **å®ä½“è¯å…¸**: é‡è¦æ¦‚å¿µå’Œæœ¯è¯­çš„è¯¦ç»†è§£é‡Š
- **å…³ç³»å›¾è°±**: å¯è§†åŒ–çš„å®ä½“å…³ç³»ç½‘ç»œæ•°æ®
- **å†²çªåˆ†æ**: è¯†åˆ«æ½œåœ¨çš„æ•…äº‹å†²çªç‚¹å’Œæƒ…èŠ‚çº¿ç´¢

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€ä½¿ç”¨

```python
from cultural_framework_analyzer import CulturalFrameworkAnalyzer

# åˆ›å»ºåˆ†æå™¨å®ä¾‹
analyzer = CulturalFrameworkAnalyzer()

# åˆ†ææ–‡æœ¬å†…å®¹
cultural_text = """
äººåŸŸ
A. ç¥è¯ä¸å®—æ•™
å¤©å‘½ä¿¡ä»°ä¸»å¯¼ï¼Œè®¤ä¸ºé“¾ç±è®°å½•ç€å¤©æ„...

B. æƒåŠ›ä¸æ³•å¾‹
å¤©å‘½ç‹æœç»Ÿæ²»ï¼Œé‡‡ç”¨é“¾ç±ç­‰çº§åˆ¶åº¦...
...
"""

# æ‰§è¡Œåˆ†æ
result = await analyzer.analyze_full_text(cultural_text)

# ä¿å­˜ç»“æœ
analyzer.save_analysis_result(result, "analysis_result.json")
```

### 2. å•åŸŸåˆ†æ

```python
from cultural_framework_analyzer import DomainType

# åˆ†æç‰¹å®šåŸŸ
domain_result = analyzer.parse_domain_text(domain_text, DomainType.HUMAN)

# æŸ¥çœ‹åŸŸçš„æ–‡åŒ–ç»´åº¦
print(domain_result.cultural_dimensions.mythology_religion)
print(domain_result.cultural_dimensions.power_law)
```

### 3. å®ä½“åˆ†æ

```python
# è·å–ç‰¹å®šç±»å‹çš„å®ä½“
organizations = [e for e in analyzer.entities if e.entity_type == EntityType.ORGANIZATION]
concepts = [e for e in analyzer.entities if e.entity_type == EntityType.CONCEPT]

# æŸ¥çœ‹é«˜é‡è¦æ€§å®ä½“
high_importance = [e for e in analyzer.entities if e.importance_level >= 8]
```

### 4. å…³ç³»ç½‘ç»œåˆ†æ

```python
# åˆ†æè·¨åŸŸå…³ç³»
relations = analyzer.analyze_cross_domain_relations()

# æŸ¥çœ‹ç‰¹å®šåŸŸçš„å…³ç³»
human_relations = [r for r in relations if r.from_domain == DomainType.HUMAN]
```

## è¾“å…¥æ–‡æœ¬æ ¼å¼

### æ ‡å‡†æ ¼å¼è¦æ±‚

```
åŸŸå
A. ç¥è¯ä¸å®—æ•™
è¯¦ç»†å†…å®¹æè¿°...

B. æƒåŠ›ä¸æ³•å¾‹
è¯¦ç»†å†…å®¹æè¿°...

C. ç»æµä¸æŠ€æœ¯
è¯¦ç»†å†…å®¹æè¿°...

D. å®¶åº­ä¸æ•™è‚²
è¯¦ç»†å†…å®¹æè¿°...

E. ä»ªå¼ä¸æ—¥å¸¸
è¯¦ç»†å†…å®¹æè¿°...

F. è‰ºæœ¯ä¸å¨±ä¹
è¯¦ç»†å†…å®¹æè¿°...

æƒ…èŠ‚é’©å­ï¼š
- é’©å­1
- é’©å­2
```

### åŸŸåæ”¯æŒ
- äººåŸŸã€å¤©åŸŸã€è’åŸŸã€å†¥åŸŸã€é­”åŸŸã€è™šåŸŸã€æµ·åŸŸã€æºåŸŸ
- æ”¯æŒå˜ä½“ï¼šäººé—´åŸŸã€å¤©ç•ŒåŸŸã€è›®è’åŸŸç­‰

## è¾“å‡ºæ•°æ®ç»“æ„

### å®Œæ•´JSONæ ¼å¼
```json
{
  "analysis_metadata": {
    "timestamp": "2025-01-XX",
    "total_domains": 8,
    "total_entities": 156,
    "total_relations": 23
  },
  "domain_cultures": {
    "äººåŸŸ": {
      "basic_info": {...},
      "cultural_dimensions": {
        "mythology_religion": {...},
        "power_law": {...},
        "economy_tech": {...},
        "family_education": {...},
        "ritual_daily": {...},
        "art_entertainment": {...}
      },
      "entities": [...],
      "plot_hooks": [...],
      "potential_conflicts": [...]
    }
  },
  "cross_domain_relations": [...],
  "concept_dictionary": {...},
  "analysis_insights": {...}
}
```

### æ ¸å¿ƒæ•°æ®å­—æ®µ

#### å®ä½“ä¿¡æ¯
- `name`: å®ä½“åç§°
- `entity_type`: å®ä½“ç±»å‹ï¼ˆç»„ç»‡ã€æ¦‚å¿µã€ç‰©å“ç­‰ï¼‰
- `domain`: æ‰€å±åŸŸ
- `dimension`: æ‰€å±æ–‡åŒ–ç»´åº¦
- `importance_level`: é‡è¦æ€§ç­‰çº§ï¼ˆ1-10ï¼‰
- `related_entities`: ç›¸å…³å®ä½“åˆ—è¡¨
- `attributes`: å®ä½“å±æ€§å­—å…¸

#### åŸŸå…³ç³»
- `from_domain` / `to_domain`: å…³ç³»åŒæ–¹
- `relation_type`: å…³ç³»ç±»å‹ï¼ˆæ”¿æ²»ã€ç»æµã€æ–‡åŒ–ç­‰ï¼‰
- `strength`: å…³ç³»å¼ºåº¦ï¼ˆ1-10ï¼‰
- `nature`: å…³ç³»æ€§è´¨ï¼ˆå‹å¥½ã€æ•Œå¯¹ã€ä¸­ç«‹ç­‰ï¼‰
- `description`: å…³ç³»æè¿°

## é«˜çº§åŠŸèƒ½

### 1. ä¸–ç•Œè§‚ä¸€è‡´æ€§æ£€æŸ¥
```python
consistency = result['analysis_insights']['world_consistency']
if not consistency['chain_concept_consistency']:
    print("å‘ç°é“¾æ¦‚å¿µä¸ä¸€è‡´é—®é¢˜")
    print(consistency['issues'])
```

### 2. ä¸»é¢˜è¯†åˆ«
```python
themes = result['analysis_insights']['dominant_themes']
for theme in themes:
    print(f"ä¸»è¦ä¸»é¢˜: {theme}")
```

### 3. å†²çªåˆ†æ
```python
conflicts = result['analysis_insights']['cultural_conflicts']
for conflict in conflicts:
    print(f"å†²çªç±»å‹: {conflict['type']}")
    print(f"å†²çªæè¿°: {conflict['description']}")
```

### 4. æƒåŠ›ç»“æ„åˆ†æ
```python
power_analysis = result['analysis_insights']['power_structure_analysis']
print(f"æƒåŠ›é›†ä¸­åº¦: {power_analysis['power_concentration']}")
```

## é¢„å®šä¹‰æ¦‚å¿µè¯å…¸

ç³»ç»Ÿå†…ç½®äº†æ³•åˆ™é“¾ç›¸å…³çš„æ ¸å¿ƒæ¦‚å¿µï¼š

- **é“¾ç±**: æ³•åˆ™è®°å½•ï¼Œå¤©åŸŸç®¡ç†
- **æ³•åˆ™é“¾**: ä¿®ç‚¼åŸºç¡€ï¼Œæ‰€æœ‰åŸŸé€šç”¨
- **æ–­é“¾æœ¯**: ç¦å¿Œæ³•æœ¯ï¼Œè™šåŸŸ/é­”åŸŸ
- **é“¾ç¥¨**: è´§å¸å·¥å…·ï¼ŒäººåŸŸ/å¤©åŸŸ
- **ç¯å°**: èº«ä»½æ ‡è¯†ï¼Œå¤©åŸŸæƒåŠ›è±¡å¾
- **é•‡é­‚å™¨**: å†¥åŸŸæ³•å™¨ï¼Œçµé­‚æ§åˆ¶

## æ‰©å±•å’Œå®šåˆ¶

### 1. æ·»åŠ æ–°å®ä½“ç±»å‹
```python
class EntityType(Enum):
    # ç°æœ‰ç±»å‹...
    NEW_TYPE = "æ–°ç±»å‹"

# æ›´æ–°è¯†åˆ«æ¨¡å¼
analyzer.entity_patterns[EntityType.NEW_TYPE] = [r'æ–°æ¨¡å¼æ­£åˆ™']
```

### 2. è‡ªå®šä¹‰åŸŸå…³ç³»
```python
# åœ¨ _analyze_domain_pair_relation æ–¹æ³•ä¸­æ·»åŠ æ–°çš„é¢„å®šä¹‰å…³ç³»
known_relations = {
    (DomainType.CUSTOM1, DomainType.CUSTOM2): {
        'type': 'è‡ªå®šä¹‰å…³ç³»',
        'strength': 8,
        'nature': 'å¤æ‚',
        'description': 'è‡ªå®šä¹‰å…³ç³»æè¿°'
    }
}
```

### 3. æ‰©å±•æ–‡åŒ–ç»´åº¦
è™½ç„¶å½“å‰æ”¯æŒå…­ç»´æ ‡å‡†ï¼Œä½†å¯ä»¥é€šè¿‡ä¿®æ”¹ `CulturalDimension` æšä¸¾å’Œç›¸å…³è§£æé€»è¾‘æ¥æ”¯æŒæ›´å¤šç»´åº¦ã€‚

## æ€§èƒ½ä¼˜åŒ–

### 1. å¤§æ–‡æœ¬å¤„ç†
- æ”¯æŒå¼‚æ­¥å¤„ç†
- åˆ†æ®µè§£æé¿å…å†…å­˜æº¢å‡º
- æ™ºèƒ½ç¼“å­˜æé«˜é‡å¤åˆ†ææ•ˆç‡

### 2. å¹¶è¡Œåˆ†æ
```python
import asyncio

# å¹¶è¡Œåˆ†æå¤šä¸ªåŸŸ
tasks = [analyzer.parse_domain_text(text, domain) for domain, text in domain_texts.items()]
results = await asyncio.gather(*tasks)
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å®ä½“è¯†åˆ«ä¸å‡†ç¡®**
   - æ£€æŸ¥æ–‡æœ¬æ ¼å¼æ˜¯å¦ç¬¦åˆæ ‡å‡†
   - è°ƒæ•´æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
   - éªŒè¯æ–‡åŒ–ç»´åº¦æ ‡è®°ï¼ˆA-Fï¼‰

2. **å…³ç³»åˆ†æç¼ºå¤±**
   - ç¡®ä¿åŸŸåæ­£ç¡®æ ‡è¯†
   - æ£€æŸ¥å®ä½“å…³è”æè¿°
   - éªŒè¯é¢„å®šä¹‰å…³ç³»é…ç½®

3. **è¾“å‡ºæ ¼å¼é—®é¢˜**
   - æ£€æŸ¥JSONåºåˆ—åŒ–å…¼å®¹æ€§
   - éªŒè¯Unicodeç¼–ç 
   - ç¡®è®¤æ–‡ä»¶å†™å…¥æƒé™

### è°ƒè¯•æŠ€å·§
```python
# å¯ç”¨è¯¦ç»†æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

# æŸ¥çœ‹ä¸­é—´ç»“æœ
print(f"è¯†åˆ«åˆ°çš„å®ä½“: {len(analyzer.entities)}")
for entity in analyzer.entities[:5]:  # æ˜¾ç¤ºå‰5ä¸ª
    print(f"- {entity.name} ({entity.entity_type.value})")
```

## ç¤ºä¾‹é¡¹ç›®

æŸ¥çœ‹ `example_analysis.py` æ–‡ä»¶äº†è§£å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼ŒåŒ…æ‹¬ï¼š
- çœŸå®æ–‡æœ¬åˆ†ææ¡ˆä¾‹
- ç»“æœå¯è§†åŒ–æ–¹æ³•
- ä¸æ•°æ®åº“é›†æˆç¤ºä¾‹
- æ‰¹é‡å¤„ç†å·¥ä½œæµ

## è®¸å¯è¯

æœ¬å·¥å…·é‡‡ç”¨MITè®¸å¯è¯ï¼Œå¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ã€‚

---

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒæºç æ³¨é‡Šå’ŒAPIæ–‡æ¡£ã€‚