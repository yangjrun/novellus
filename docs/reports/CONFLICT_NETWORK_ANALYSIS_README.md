# 跨域冲突网络分析系统

## 系统概述

这是一个完整的跨域冲突网络分析系统，专门为"裂世九域·法则链纪元"小说世界的冲突关系网络建模和分析而设计。系统基于复杂网络理论、机器学习和数据科学方法，提供深度的冲突分析、风险预警和决策支持。

## 功能特性

### 🌐 复杂网络分析
- **基础网络指标**: 密度、路径长度、聚类系数、连通性等
- **中心性分析**: 度中心性、介数中心性、接近中心性、特征向量中心性、PageRank
- **多层网络建模**: 按域、实体类型、关系类型分层分析
- **小世界特性**: 检测网络的小世界属性和尺度不变性

### 🏛️ 社群结构发现
- **多算法社群检测**: Louvain、贪心模块化、标签传播、光谱聚类
- **社群特征分析**: 模块度、社群大小分布、跨域连接分析
- **冲突联盟识别**: 发现潜在的对立阵营和联盟组合

### 🔍 关键路径识别
- **升级路径分析**: 识别冲突升级的关键传播路径
- **瓶颈节点发现**: 找出网络中的关键控制点
- **路径强度评估**: 计算路径的冲突传播能力

### 🛡️ 网络鲁棒性评估
- **攻击模拟**: 随机攻击和目标攻击对比分析
- **脆弱性评分**: 量化网络的整体脆弱性
- **关键节点识别**: 确定最重要的保护目标

### ⏱️ 动态网络建模
- **状态转换分析**: 构建冲突状态的马尔可夫链模型
- **时间序列分析**: 冲突强度的时间模式和趋势预测
- **升级概率计算**: 基于历史模式预测冲突升级风险

### 🚨 预警系统
- **风险指标监控**: 多维度风险指标实时评估
- **早期预警**: 基于机器学习的冲突预警机制
- **情景分析**: "what-if"分析和干预效果评估

### 📊 交互式可视化
- **网络图可视化**: 多层次、交互式的网络图表
- **动态演化动画**: 冲突升级过程的动态展示
- **指标仪表盘**: 实时监控关键指标的变化

### 📈 预测建模
- **机器学习模型**: 随机森林、梯度提升、逻辑回归等
- **特征工程**: 基于网络结构的特征提取
- **模型评估**: 交叉验证和性能评估

## 系统架构

```
src/analysis/
├── conflict_network_analyzer.py      # 基础网络分析器
├── advanced_network_analyzer.py      # 高级网络分析器
├── dynamic_conflict_analyzer.py      # 动态网络分析器
├── network_visualizer.py            # 网络可视化系统
├── conflict_prediction_system.py    # 冲突预测系统
├── comprehensive_report_generator.py # 综合报告生成器
└── main_conflict_analyzer.py        # 主程序入口
```

## 数据结构

### 输入数据
- **实体数据**: 100个冲突实体（核心资源、法条制度、关键角色、推断实体）
- **关系数据**: 2,296个关系网络（对立、依赖、竞争、制约）
- **域归属**: 人域、天域、灵域、荒域的跨域映射

### 输出结果
- **网络模型**: 可重复使用的图结构模型
- **分析报告**: HTML和JSON格式的详细报告
- **可视化**: 交互式图表和静态图表
- **预警数据**: 风险指标和预警信息

## 安装和使用

### 环境要求
```bash
Python 3.8+
numpy >= 1.20.0
pandas >= 1.3.0
networkx >= 2.6.0
scikit-learn >= 1.0.0
matplotlib >= 3.4.0
seaborn >= 0.11.0
plotly >= 5.0.0  # 可选，用于交互式可视化
flask >= 2.0.0   # 可选，用于API服务
```

### 快速开始

1. **运行完整分析**:
```bash
python run_conflict_analysis.py
```

2. **使用主程序**:
```bash
python src/analysis/main_conflict_analyzer.py --data enhanced_conflict_output/enhanced_conflict_elements_data.json
```

3. **启动API服务**:
```bash
python src/analysis/main_conflict_analyzer.py --api --port 5000
```

### 编程接口

```python
from src.analysis.main_conflict_analyzer import ConflictAnalysisSystem

# 创建分析系统
system = ConflictAnalysisSystem()

# 运行完整分析
results = system.run_complete_analysis(
    data_source="path/to/data.json",
    report_title="自定义报告标题"
)

if results["success"]:
    print(f"分析完成，报告ID: {results['report_id']}")
    system.print_analysis_summary()
```

## 核心算法

### 网络指标计算
- **密度**: D = 2E / (N(N-1))，其中E为边数，N为节点数
- **聚类系数**: 局部和全局聚类系数的计算
- **中心性**: 多种中心性指标的并行计算

### 社群检测
- **Louvain算法**: 基于模块度优化的快速社群检测
- **光谱聚类**: 基于拉普拉斯矩阵特征值分解
- **标签传播**: 基于节点标签的迭代传播

### 路径分析
- **Dijkstra算法**: 最短路径搜索
- **Floyd-Warshall**: 全对最短路径
- **升级概率**: 基于边权重和路径特征的概率计算

### 预测模型
- **特征提取**: 网络结构特征、节点属性特征、时间序列特征
- **集成学习**: 多模型投票和加权平均
- **交叉验证**: K折交叉验证评估模型性能

## 分析报告

系统生成的综合分析报告包含：

### 执行摘要
- 数据概览和网络基础统计
- 主要发现和关键洞察
- 风险状况总体评估

### 网络分析结果
- 基础网络指标详细分析
- 中心性排名和重要节点识别
- 社群结构和跨域连接分析
- 网络鲁棒性和脆弱性评估

### 风险评估
- 多维度风险指标评估
- 预警列表和严重程度分级
- 风险分布和趋势分析

### 预测分析
- 升级路径和传播模式
- 时间序列预测和趋势分析
- 情景分析和干预效果评估

### 建议措施
- 基于分析结果的具体建议
- 优先级排序和实施路径
- 监控和预防策略

## 可视化展示

### 交互式网络图
- 多层次网络结构展示
- 节点和边的详细信息
- 动态布局和缩放功能

### 指标仪表盘
- 实时风险指标监控
- 历史趋势图表
- 预警状态显示

### 动态演化动画
- 冲突升级过程可视化
- 状态转换动画
- 时间序列变化展示

## API接口

系统提供RESTful API接口：

### 分析接口
```http
POST /api/analyze
Content-Type: application/json

{
  "title": "分析报告标题"
}
```

### 报告获取
```http
GET /api/report/{report_id}
```

### 报告列表
```http
GET /api/reports
```

### 健康检查
```http
GET /api/health
```

## 性能优化

### 计算优化
- **并行计算**: NetworkX并行算法支持
- **缓存机制**: 布局和计算结果缓存
- **内存管理**: 大图的分块处理

### 可视化优化
- **采样显示**: 大网络的节点采样
- **LOD渲染**: 层次细节渲染
- **异步加载**: 渐进式数据加载

## 扩展能力

### 自定义算法
- 模块化设计，易于添加新算法
- 标准化接口，支持自定义指标
- 插件机制，支持第三方扩展

### 数据接口
- 支持多种数据格式（JSON、CSV、GraphML等）
- 数据库连接支持
- 流式数据处理

### 部署选项
- 单机部署和分布式部署
- Docker容器化支持
- 云服务集成

## 应用场景

### 小说创作辅助
- 情节冲突分析和优化
- 角色关系网络梳理
- 剧情发展预测

### 世界观构建
- 多域冲突体系设计
- 权力平衡分析
- 系统稳定性评估

### 读者分析
- 冲突吸引力评估
- 剧情紧张度量化
- 阅读体验优化

## 技术特色

### 科学性
- 基于成熟的复杂网络理论
- 统计学和机器学习方法验证
- 可重现的分析流程

### 实用性
- 针对具体应用场景优化
- 直观的可视化展示
- 可操作的建议输出

### 扩展性
- 模块化架构设计
- 标准化数据接口
- 灵活的配置选项

## 后续发展

### 功能增强
- 深度学习模型集成
- 实时数据流处理
- 多维度情景建模

### 性能提升
- GPU加速计算
- 分布式处理架构
- 内存优化算法

### 应用拓展
- 其他小说作品适配
- 社交网络分析
- 商业场景应用

---

**联系信息**: 如有问题或建议，请查看项目文档或提交Issue。

**版权声明**: 本系统基于开源组件构建，遵循相应的开源协议。